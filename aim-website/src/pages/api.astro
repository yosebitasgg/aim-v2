---
import BaseLayout from '../layouts/BaseLayout.astro';
// Podríamos usar un componente de resaltado de código aquí, pero lo mantendremos simple por ahora.
---
<BaseLayout
  title="Referencia de API"
  description="Documentación técnica para la API de Automatización Industrial Mireles (AIM)."
>
  <div class="w-full flex">
    <!-- Barra Lateral de Navegación -->
    <aside class="hidden lg:block sticky top-20 h-[calc(100vh-80px)] w-64 flex-shrink-0 border-r py-8 pr-4">
      <nav class="flex flex-col space-y-2">
        <h3 class="font-bold">Introducción</h3>
        <a href="#autenticacion" class="text-gray-600 hover:text-teal-600">Autenticación</a>
        <a href="#rate-limits" class="text-gray-600 hover:text-teal-600">Límites de Tasa</a>

        <h3 class="font-bold pt-4">Endpoints de Agentes</h3>
        <a href="#listar-agentes" class="text-gray-600 hover:text-teal-600">Listar Agentes</a>
        <a href="#obtener-agente" class="text-gray-600 hover:text-teal-600">Obtener Agente Específico</a>
        <a href="#ejecutar-agente" class="text-teal-600 font-medium">Ejecutar un Agente</a>
      </nav>
    </aside>

    <!-- Contenido Principal y Ejemplos de Código -->
    <div class="flex-grow min-w-0">
        <div class="grid grid-cols-1 md:grid-cols-2">
            <!-- Columna de Descripción -->
            <main class="w-full py-8 md:px-8">
              <div class="prose max-w-none">
                <h1>Referencia de API</h1>
                <p>Nuestra API REST te permite interactuar con tus Agentes Inteligentes de forma programática para una integración más profunda con tus sistemas existentes.</p>
                
                <h2 id="autenticacion">Autenticación</h2>
                <p>Todas las solicitudes a la API deben ser autenticadas. Debes incluir tu clave de API en el encabezado <code>Authorization</code> como un token Bearer.</p>
                
                <h2 id="ejecutar-agente">Ejecutar un Agente</h2>
                <p>Inicia una ejecución de un agente específico a demanda. Esto es útil para tareas que no son programadas.</p>
                <p><code>POST /v1/agents/{agent_id}/run</code></p>
                <h3>Parámetros del Body (JSON)</h3>
                <ul>
                  <li><strong>input_data</strong> (objeto, opcional): Un objeto JSON con los datos de entrada para la ejecución del agente.</li>
                </ul>
              </div>
            </main>

            <!-- Columna de Ejemplos de Código -->
            <aside class="w-full bg-slate-900 text-white p-8">
              <div class="sticky top-20">
                <h3 class="text-lg font-bold">Ejemplo de Solicitud (cURL)</h3>
                <pre class="bg-slate-800 rounded-lg p-4 mt-4 text-sm overflow-x-auto"><code>curl -X POST \
  'https://api.automatizacionmireles.com/v1/agents/agt_12345/run' \
  -H 'Authorization: Bearer sk_test_YOUR_API_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "input_data": {
      "invoice_id": "INV-2025-07"
    }
  }'
</code></pre>

                <h3 class="text-lg font-bold mt-8">Respuesta de Éxito (202 Accepted)</h3>
                <pre class="bg-slate-800 rounded-lg p-4 mt-4 text-sm overflow-x-auto"><code>{
  "execution_id": "exec_abcde12345",
  "agent_id": "agt_12345",
  "status": "pending",
  "created_at": "2025-07-10T10:00:00Z"
}
</code></pre>
              </div>
            </aside>
        </div>
    </div>
  </div>
</BaseLayout> 